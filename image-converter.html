<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Tools – Many Tools</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
  --blue:#2563eb;
  --dark:#1d4ed8;
  --light:#eff6ff;
  --white:#fff;
  --shadow:0 4px 8px rgba(0,0,0,.1);
  --radius:12px;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{background:var(--light);}

/* ===== HEADER (SAME STRUCTURE) ===== */
header{background:#fff;box-shadow:var(--shadow);position:sticky;top:0;z-index:100}
.container{max-width:1200px;margin:auto;padding:0 20px}
.header-container{display:flex;justify-content:space-between;align-items:center;padding:16px 0}
.logo{display:flex;align-items:center;gap:8px;font-size:1.6rem;font-weight:700;color:var(--blue);text-decoration:none}
nav ul{display:flex;gap:25px;list-style:none}
nav a{text-decoration:none;color:#111}
.mobile-menu-btn{display:none;background:none;border:none;font-size:1.4rem;color:var(--blue)}
.contact-email{text-decoration:none;color:var(--blue)}

@media(max-width:768px){
  nav{display:none;position:absolute;top:70px;left:0;width:100%;background:#fff;padding:20px}
  nav.active{display:block}
  nav ul{flex-direction:column}
  .mobile-menu-btn{display:block}
  .contact-email{display:none}
}

/* ===== TOOL AREA ===== */
.tool-wrapper{
  display:flex;
  justify-content:center;
  padding:40px 15px;
}

.tool-box{
  background:#fff;
  width:100%;
  max-width:450px;
  padding:25px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}

.tool{display:none}
.tool.active{display:block}

.tool h2{text-align:center;color:var(--blue);margin-bottom:20px}

label{font-size:14px;font-weight:600}
input,select{width:100%;margin:10px 0 16px}

/* Buttons */
button{
  width:100%;
  padding:12px;
  background:var(--blue);
  color:#fff;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
button:hover{background:var(--dark)}

.preview{text-align:center;margin-bottom:15px}
.preview img{max-width:100%;display:none;border-radius:8px}

/* Nav buttons */
.tool-nav{
  display:flex;
  gap:10px;
  margin-top:15px;
}
.tool-nav a,.tool-nav button{
  flex:1;
  text-align:center;
  text-decoration:none;
  font-weight:600;
}
.back-btn{background:#e5e7eb;color:#111}
.next-btn{background:#dbeafe;color:var(--blue)}
</style>
</head>

<body>

<header>
  <div class="container header-container">
    <a href="index.html" class="logo">
      <i class="fas fa-tools"></i>Many Tools
    </a>

    <button class="mobile-menu-btn" id="mobileMenuBtn">
      <i class="fas fa-bars"></i>
    </button>

    <nav id="mainNav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="index.html#tools">All Tools</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
    </nav>

    <a href="mailto:jervik2d@gmail.com" class="contact-email">
      <i class="fas fa-envelope"></i> jervik2d@gmail.com
    </a>
  </div>
</header>

<div class="tool-wrapper">
<div class="tool-box">

  <!-- IMAGE CONVERTER -->
  <div class="tool active">
    <h2>Image Converter</h2>
    <input type="file" id="convUpload" accept="image/*">
    <select id="convFormat">
      <option value="image/jpeg">JPG</option>
      <option value="image/png">PNG</option>
      <option value="image/webp">WEBP</option>
    </select>
    <div class="preview"><img id="convPreview"></div>
    <button onclick="convertImage()">Convert & Download</button>
  </div>

  <!-- IMAGE COMPRESSOR -->
  <div class="tool">
    <h2>Image Compressor</h2>
    <input type="file" id="compUpload" accept="image/*">
    <label>Quality</label>
    <input type="range" id="compQuality" min="0.1" max="1" step="0.1" value="0.6">
    <button onclick="compressImage()">Compress & Download</button>
  </div>

  <!-- IMAGE RESIZER -->
  <div class="tool">
    <h2>Image Resizer</h2>
    <input type="file" id="resizeUpload" accept="image/*">
    <input type="number" id="resizeW" placeholder="Width (px)">
    <input type="number" id="resizeH" placeholder="Height (px)">
    <button onclick="resizeImage()">Resize & Download</button>
  </div>

  <!-- IMAGE GRAYSCALE -->
  <div class="tool">
    <h2>Image Grayscale</h2>
    <input type="file" id="grayUpload" accept="image/*">
    <button onclick="grayscaleImage()">Convert to Grayscale</button>
  </div>

  <div class="tool-nav">
    <a href="index.html" class="back-btn">← Back</a>
    <button class="next-btn" id="nextBtn">Next Tool →</button>
  </div>

</div>
</div>

<script>
/* ======================================================
   GLOBAL IMAGE STATE (DO NOT MOVE)
====================================================== */
let currentImage = null;
let currentImageDataURL = null;
let currentFile = null;

function readImage(file, callback) {
  if (!file) return;

  currentFile = file;
  const reader = new FileReader();
  const img = new Image();

  reader.onload = () => {
    img.src = reader.result;
    img.onload = () => {
      currentImage = img;
      currentImageDataURL = reader.result;
      callback(img, reader.result);
    };
  };

  reader.readAsDataURL(file);
}

/* ======================================================
   MOBILE MENU
====================================================== */
document.getElementById("mobileMenuBtn").onclick = () => {
  document.getElementById("mainNav").classList.toggle("active");
};

/* ======================================================
   TOOL SWITCHING (NEXT TOOL BUTTON)
====================================================== */
const tools = document.querySelectorAll(".tool");
let currentToolIndex = 0;

document.getElementById("nextBtn").onclick = () => {
  tools[currentToolIndex].classList.remove("active");
  currentToolIndex = (currentToolIndex + 1) % tools.length;
  tools[currentToolIndex].classList.add("active");
};

/* ======================================================
   IMAGE CONVERTER – PREVIEW + CONVERT
====================================================== */
const convUpload = document.getElementById("convUpload");
const convPreview = document.getElementById("convPreview");

if (convUpload) {
  convUpload.addEventListener("change", e => {
    readImage(e.target.files[0], (_, src) => {
      convPreview.src = src;
      convPreview.style.display = "block";
    });
  });
}

function convertImage() {
  if (!currentImage) {
    alert("Please upload an image first");
    return;
  }

  const format = document.getElementById("convFormat").value;

  const canvas = document.createElement("canvas");
  canvas.width = currentImage.width;
  canvas.height = currentImage.height;
  canvas.getContext("2d").drawImage(currentImage, 0, 0);

  canvas.toBlob(blob => {
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "converted." + format.split("/")[1];
    link.click();
  }, format, 0.9);
}

/* ======================================================
   IMAGE COMPRESSOR
====================================================== */
function compressImage() {
  const file = document.getElementById("compUpload").files[0];
  if (!file) {
    alert("Upload an image");
    return;
  }

  readImage(file, img => {
    const quality = document.getElementById("compQuality").value;

    const canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    canvas.getContext("2d").drawImage(img, 0, 0);

    canvas.toBlob(blob => {
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "compressed.jpg";
      link.click();
    }, "image/jpeg", quality);
  });
}

/* ======================================================
   IMAGE RESIZER – SHOW ORIGINAL SIZE + RESIZE
====================================================== */
const resizeUpload = document.getElementById("resizeUpload");
const resizeInfo = document.getElementById("resizeInfo");

if (resizeUpload) {
  resizeUpload.addEventListener("change", e => {
    readImage(e.target.files[0], img => {
      const kb = (currentFile.size / 1024).toFixed(2);
      resizeInfo.textContent =
        `Original: ${img.width}px × ${img.height}px | ${kb} KB`;
    });
  });
}

function resizeImage() {
  if (!currentImage) {
    alert("Upload an image first");
    return;
  }

  const w = parseInt(document.getElementById("resizeW").value) || currentImage.width;
  const h = parseInt(document.getElementById("resizeH").value) || currentImage.height;

  const canvas = document.createElement("canvas");
  canvas.width = w;
  canvas.height = h;
  canvas.getContext("2d").drawImage(currentImage, 0, 0, w, h);

  canvas.toBlob(blob => {
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "resized.png";
    link.click();
  });
}

/* ======================================================
   IMAGE GRAYSCALE
====================================================== */
function grayscaleImage() {
  const file = document.getElementById("grayUpload").files[0];
  if (!file) {
    alert("Upload an image");
    return;
  }

  readImage(file, img => {
    const canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;

    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);

    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;

    for (let i = 0; i < data.length; i += 4) {
      const gray = (data[i] + data[i + 1] + data[i + 2]) / 3;
      data[i] = data[i + 1] = data[i + 2] = gray;
    }

    ctx.putImageData(imageData, 0, 0);

    canvas.toBlob(blob => {
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "grayscale.png";
      link.click();
    });
  });
}
</script>


</body>
</html>
